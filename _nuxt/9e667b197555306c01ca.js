(window.webpackJsonp=window.webpackJsonp||[]).push([[6,7,8,9],{184:function(e,t,r){"use strict";var n=r(3),l=r(20),o=r(25),c=r(115),f=r(60),d=r(10),v=r(45).f,h=r(61).f,m=r(8).f,y=r(185).trim,_=n.Number,k=_,x=_.prototype,P="Number"==o(r(80)(x)),w="trim"in String.prototype,F=function(e){var t=f(e,!1);if("string"==typeof t&&t.length>2){var r,n,l,o=(t=w?t.trim():y(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,l=49;break;case 79:case 111:n=8,l=55;break;default:return+t}for(var code,c=t.slice(2),i=0,d=c.length;i<d;i++)if((code=c.charCodeAt(i))<48||code>l)return NaN;return parseInt(c,n)}}return+t};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof _&&(P?d((function(){x.valueOf.call(r)})):"Number"!=o(r))?c(new k(F(t)),r,_):F(t)};for(var O,S=r(6)?v(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Q=0;S.length>Q;Q++)l(k,O=S[Q])&&!l(_,O)&&m(_,O,h(k,O));_.prototype=x,x.constructor=_,r(11)(n,"Number",_)}},185:function(e,t,r){var n=r(5),l=r(24),o=r(10),c=r(186),f="["+c+"]",d=RegExp("^"+f+f+"*"),v=RegExp(f+f+"*$"),h=function(e,t,r){var l={},f=o((function(){return!!c[e]()||"​"!="​"[e]()})),d=l[e]=f?t(m):c[e];r&&(l[r]=d),n(n.P+n.F*f,"String",l)},m=h.trim=function(e,t){return e=String(l(e)),1&t&&(e=e.replace(d,"")),2&t&&(e=e.replace(v,"")),e};e.exports=h},186:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},188:function(e,t,r){"use strict";r.r(t);r(184);var n={name:"listing-preview",props:{doc:Object,index:Number,idFieldName:{type:String,default:"id"},thePage:Object},computed:{previewThumbnail:function(){return this.doc.hasOwnProperty("img.uri.thumbnail")?this.doc["img.uri.thumbnail"][0]:"no image"},previewTitle:function(){return this.doc.title},previewDesc:function(){return this.doc.teaser}},data:function(){return{showCarousels:!1}},methods:{showSlides:function(){console.log(this.doc)}}},l=r(14),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mb-2"},[r("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[r("v-avatar",{attrs:{size:"180",tile:""}},[r("v-img",{attrs:{src:e.previewThumbnail,"max-width":"180"},on:{click:function(t){t.stopPropagation(),e.showCarousels=!0}}})],1),r("div",[r("v-card-title",[e._v(e._s(e.previewTitle))]),r("v-card-text",[e._v(e._s(e.previewDesc))])],1)],1),r("v-dialog",{attrs:{"max-width":"860"},model:{value:e.showCarousels,callback:function(t){e.showCarousels=t},expression:"showCarousels"}},[r("v-carousel",{attrs:{height:"600"}},e._l(e.doc["img.uri.preview"],(function(e,i){return r("v-carousel-item",{key:i,attrs:{src:e}})})),1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},189:function(e,t,r){"use strict";r.r(t);var n={name:"facet-buckets",props:["facets"],methods:{bucketValue:function(e){return console.log(e),e}}},l=r(14),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-expansion-panels",e._l(e.facets,(function(t,n){return r("v-expansion-panel",{key:"facet-"+n,class:{"grey lighten-2":n%2==0}},[r("v-expansion-panel-header",[e._v(e._s(t.name)+" - "+e._s(t.buckets.length))]),r("v-expansion-panel-content",[r("v-list",{class:{"grey lighten-2":n%2==0}},[r("v-list-item-group",e._l(t.buckets,(function(n,i){return r("v-list-item",{key:"bucket-"+i,on:{click:function(r){return e.$emit("bucket-select",t.name,n.value)}}},[r("v-list-item-content",[e._v(e._s(n.value))]),r("v-list-item-action",[r("v-list-item-action-text",[e._v(e._s(n.count))])],1)],1)})),1)],1)],1)],1)})),1)}),[],!1,null,null,null);t.default=component.exports},190:function(e,t,r){"use strict";r.r(t);var n={name:"query-filters",props:["filters"],computed:{}},l=r(14),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.filters?r("v-card",{staticClass:"mb-3"},[r("v-list",{staticClass:"indigo lighten-4"},[r("v-subheader",[e._v("Filters")]),r("v-list-item-group",e._l(e.filters,(function(filter,i){return r("v-list-item",{key:"filter-"+i,on:{click:function(t){return e.$emit("filter-select",filter)}}},[r("v-list-item-content",[e._v(e._s(filter.replace(":",": ")))]),r("v-list-item-action",[r("v-list-item-action-text",[e._v("X")])],1)],1)})),1)],1)],1):e._e()}),[],!1,null,null,null);t.default=component.exports},199:function(e,t,r){"use strict";r.r(t);r(62),r(21);var n=r(29),l=(r(13),r(9),r(33),r(116),r(46),r(47),r(81),r(43)),o=r.n(l),c=r(188),f=r(189),d=r(190);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var h={components:{"listing-preview":c.default,"facet-buckets":f.default,"query-filters":d.default},layout:"vuetify",name:"solrsearch",data:function(){return{settingsDialog:!1,query:"*:*",valid:!1,idField:"id",collectionUrl:"http://search.example.com",collections:[],collectionLabel:"Collection: ",allFields:["abc","cde"],facetFields:[],facetInput:null,allCities:["Toronto","Markham"],cities:["Toronto","Markham"],cityInput:null,allNeighbours:["Toronto","Markham"],neighbours:["Toronto","Markham"],neighbourInput:null,filterQuery:"",sort:"",fieldList:"",boostQuery:"",boostFunction:"",queryFields:"",priceRangeOn:!1,priceRange:[5e5,1e6],totalHits:0,totalPages:0,facets:null,stats:null,results:null,resultSummary:"",debugQuery:!1,debugExplain:null,explainItem:null,currentPage:1,perPage:15,profileRepo:"/nuxt-repo/",profileName:"local.json"}},computed:{filters:function(){return""===this.filterQuery?null:this.filterQuery.split("||")}},methods:{simpleSearch:function(){var e=this;e.resultSummary="Searching ...",e.results=null,e.facets=null,e.stats=null,e.query||(e.query="*:*");var t=e.buildQuery();e.jeQueryParams&&(e.jeQueryParams.setMode("view"),e.jeQueryParams.set(t),e.jeQueryParams.expandAll(),e.jeQueryParams.setMode("code"));var r=e.collectionUrl+"select";o.a.post(r,t).then((function(r){e.totalHits=r.data.response.numFound,e.totalPages=Math.ceil(e.totalHits/e.perPage),e.results=r.data.response.docs,r.data.hasOwnProperty("debug")&&(e.debugExplain=r.data.debug),r.data.hasOwnProperty("facet_counts")&&(e.facets=e.getReadyFacets(r.data.facet_counts.facet_fields));var n=t.params.start;e.resultSummary="Showing "+(n+1)+" - "+Math.min(n+e.perPage,e.totalHits)+" of "+e.totalHits+" Items",e.totalHits>0&&console.log("total hits: "+e.totalHits)})).catch((function(t){e.resultSummary="Query Error!",console.log(t)}))},buildQuery:function(){var e=(this.currentPage-1)*this.perPage,t=Object.assign({rows:this.perPage,defType:"edismax",start:e,sort:this.sort,debugQuery:this.debugQuery},this.getFacetFields(),this.getFieldList(),this.getFilterQuery(),this.getBoostQuery(),this.getBoostFunction(),this.getQueryFields());return{query:this.query,params:t}},getFacetFields:function(){return this.facetFields.length<1?{}:{facet:"on","facet.limit":-1,"facet.field":this.facetFields}},getFieldList:function(){if(""===this.fieldList)return{};var e=this.fieldList.split(",");return e.includes(this.idField)||e.push(this.idField),{fl:e}},getBoostFunction:function(){return""===this.boostFunction?{}:{bf:this.boostFunction}},getBoostQuery:function(){return""===this.boostQuery?{}:{bq:this.boostQuery}},getQueryFields:function(){return""===this.queryFields?{}:{qf:this.queryFields}},getFilterQuery:function(){var e=[];if(""!=this.filterQuery&&((e=this.filterQuery.split("||")).length>0&&(e=e.filter((function(e){return!(e.startsWith("listvalue_i")||e.startsWith("city"))}))),this.filterQuery=e.join("||")),this.priceRangeOn){var t="listvalue_i:["+this.priceRange[0]+" TO "+this.priceRange[1]+"]";e.push(t),this.filterQuery=e.join("||")}return this.cities.length>0&&(e.push('city:("'+this.cities.join('","')+'")'),this.filterQuery=e.join("||")),""===this.filterQuery?{}:{fq:this.filterQuery.split("||")}},getReadyFacets:function(e){var t=[];return Object.keys(e).forEach((function(r){for(var n=e[r],l=[],i=0;i<n.length;i+=2)n[i+1]<1||l.push({value:n[i],count:n[i+1]});var o={label:r,name:r,buckets:l};t.push(o)})),t},handleSearchButton:function(){this.currentPage=1,this.simpleSearch()},handleBucketSelect:function(e,t){var r=e+':"'+t+'"';this.filterQuery=""===this.filterQuery?r:this.filterQuery+"||"+r,this.currentPage=1,this.simpleSearch()},removeFilter:function(filter){var e=this.filterQuery.split("||").filter((function(e){return e!=filter}));switch(this.filterQuery=e.join("||"),filter.split(":")[0]){case"listvalue_i":this.priceRangeOn=!1}this.currentPage=1,this.simpleSearch()},removeCitySelection:function(e){var t=this.cities.indexOf(e);t>=0&&this.cities.splice(t,1)},removeFacetSelection:function(e){console.log("selected facet:",e);var t=this.facetFields.indexOf(e);t>=0&&this.facetFields.splice(t,1)},facetSelectionChange:function(){},settingsCancel:function(){this.settingsDialog=!1},settingsOk:function(){this.settingsDialog=!1,this.simpleSearch()},settingsSave:function(){var e=this;console.log(e._data);var t=Object.keys(e._data).filter((function(t){return"function"!=typeof e._data[t]}));console.log(t);var r=t.reduce((function(t,r){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},t,Object(n.a)({},r,e._data[r]))}),{});console.log(r),console.log(JSON.stringify(r)),this.settingsDialog=!1},loadProfile:function(){var e=this,t=e.profileRepo+e.profileName;o.a.get(t).then((function(t){Object.keys(t.data).forEach((function(r){"files"===r?t.data[r].forEach((function(t){o.a.get(e.profileRepo+t.fileName).then((function(r){e[t.fieldName]=r.data.split("\n")}))})):e[r]=t.data[r]}))}))}}},m=r(14),component=Object(m.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xs":""}},[r("v-card",{staticClass:"d-flex flex-row",attrs:{flat:"",tile:""}},[r("v-text-field",{attrs:{dense:"",id:"input-number",autocomplete:"off",label:"Type your query here"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),r("v-btn",{staticClass:"pa-2",attrs:{color:"warning",dark:"",icon:""},on:{click:e.handleSearchButton}},[r("v-icon",[e._v("mdi-magnify")]),e._v("search")],1),r("v-btn",{staticClass:"pa-2",attrs:{color:"success darken-1",dark:"",icon:""},on:{click:function(t){t.stopPropagation(),e.settingsDialog=!0}}},[r("v-icon",[e._v("mdi-settings")]),e._v("settings")],1)],1),r("v-dialog",{attrs:{"max-width":"780px",persistent:""},model:{value:e.settingsDialog,callback:function(t){e.settingsDialog=t},expression:"settingsDialog"}},[r("v-card",[r("v-toolbar",{attrs:{flat:"",color:"primary",dark:""}},[r("v-toolbar-title",[e._v("Search settings")])],1),r("v-tabs",[r("v-tab",[r("v-icon",{attrs:{left:""}},[e._v("mdi-settings")]),e._v("Settings")],1),r("v-tab",[r("v-icon",{attrs:{left:""}},[e._v("mdi-account")]),e._v("Profiles")],1),r("v-tab-item",[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"10"}},[r("v-text-field",{attrs:{label:"Solr Collection URL:",dense:""},model:{value:e.collectionUrl,callback:function(t){e.collectionUrl=t},expression:"collectionUrl"}})],1),r("v-col",{attrs:{cols:"12",md:"2"}},[r("v-checkbox",{attrs:{label:"Debug",dense:""},model:{value:e.debugQuery,callback:function(t){e.debugQuery=t},expression:"debugQuery"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"3"}},[r("v-text-field",{attrs:{label:"Items Per Page:",dense:""},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),r("v-col",{attrs:{cols:"12",md:"9"}},[r("v-text-field",{attrs:{label:"Sort:",dense:""},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-autocomplete",{attrs:{label:"Cities:",items:e.allCities,multiple:"","search-input":e.cityInput,dense:"",chips:"","small-chips":""},on:{input:function(t){e.cityInput=null},"update:searchInput":function(t){e.cityInput=t},"update:search-input":function(t){e.cityInput=t}},scopedSlots:e._u([{key:"selection",fn:function(data){return[r("v-chip",{attrs:{close:""},on:{"click:close":function(t){return e.removeCitySelection(data.item)}}},[e._v(e._s(data.item))])]}}]),model:{value:e.cities,callback:function(t){e.cities=t},expression:"cities"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"3"}},[r("v-checkbox",{staticClass:"mt-0 pt-0",attrs:{label:"Price Range",dense:""},model:{value:e.priceRangeOn,callback:function(t){e.priceRangeOn=t},expression:"priceRangeOn"}})],1),r("v-col",{attrs:{cols:"12",md:"9"}},[r("v-range-slider",{attrs:{disabled:!e.priceRangeOn,max:"5000000",min:"10000",step:"10000","hide-details":"",dense:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("span",{domProps:{textContent:e._s(e.priceRange[0])}})]},proxy:!0},{key:"append",fn:function(){return[r("span",{domProps:{textContent:e._s(e.priceRange[1])}})]},proxy:!0}]),model:{value:e.priceRange,callback:function(t){e.priceRange=t},expression:"priceRange"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-autocomplete",{attrs:{label:"Facets:",items:e.allFields,multiple:"","search-input":e.facetInput,dense:"",chips:"","small-chips":""},on:{change:e.facetSelectionChange,input:function(t){e.facetInput=null},"update:searchInput":function(t){e.facetInput=t},"update:search-input":function(t){e.facetInput=t}},scopedSlots:e._u([{key:"selection",fn:function(data){return[r("v-chip",{attrs:{close:""},on:{"click:close":function(t){return e.removeFacetSelection(data.item)}}},[e._v(e._s(data.item))])]}}]),model:{value:e.facetFields,callback:function(t){e.facetFields=t},expression:"facetFields"}})],1)],1)],1)],1)],1)],1),r("v-tab-item",[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("v-form",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Profile Repository URL:",autocomplete:"on",dense:""},model:{value:e.profileRepo,callback:function(t){e.profileRepo=t},expression:"profileRepo"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"9"}},[r("v-text-field",{attrs:{label:"Pick Profile:",dense:""},model:{value:e.profileName,callback:function(t){e.profileName=t},expression:"profileName"}})],1),r("v-col",{attrs:{cols:"12",md:"3"}},[r("v-btn",{on:{click:e.loadProfile}},[e._v("Load")])],1)],1)],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.settingsCancel}},[e._v("cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.settingsOk}},[e._v("Ok")])],1)],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"3"}},[r("h3",[e._v("Facets")]),r("query-filters",{attrs:{filters:e.filters},on:{"filter-select":e.removeFilter}}),r("facet-buckets",{attrs:{facets:e.facets},on:{"bucket-select":e.handleBucketSelect}})],1),r("v-col",{attrs:{cols:"12",md:"9"}},[r("h3",[e._v(e._s(e.resultSummary))]),e.results?r("v-pagination",{attrs:{length:e.totalPages,"total-visible":"10"},on:{input:e.simpleSearch},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e(),e._l(e.results,(function(t,n){return r("listing-preview",{key:t.id,attrs:{doc:t,index:n,idFieldName:e.idField}})})),e.results?r("v-pagination",{attrs:{length:e.totalPages,"total-visible":"10"},on:{input:e.simpleSearch},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],2)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);